# 🌳 감각 노트: 트리 DFS

## 🎯 핵심 개념 요약

| 항목               | 설명                                                       |
| ------------------ | ---------------------------------------------------------- |
| 대상 구조          | 트리 (사이클이 없는 무방향 연결 그래프)                    |
| 목적               | 트리에서 모든 노드를 방문하며 특정 조건 또는 누적값 계산   |
| 전형적인 순회 방식 | DFS(재귀적 깊이 우선 탐색)                                 |
| 대표 사용 예시     | 최대 거리, 트리의 지름, 서브트리 계산, 독립 집합 조건 분기 |

---

## 📌 DFS 순회 패턴

```python
def dfs(node, acc_distance):
    visited[node] = True
    for next_node, weight in graph[node]:
        if not visited[next_node]:
            dfs(next_node, acc_distance + weight)
```

- **기본 매개변수**: 현재 노드, 누적 거리 (또는 상태)
- **방문 처리**: `visited[node] = True`
- **갱신 처리**: 목적에 따라 최댓값, 리스트, 경로 등을 갱신

---

## 🧩 실전 감각 유형 정리

### 1️⃣ `트리의 지름` – BOJ 1967

> DFS 2회로 가장 먼 노드 A, B를 찾고 그 거리를 지름으로 반환

- 핵심 감각:

  - 1차 DFS로 한쪽 끝점 A 찾기
  - 2차 DFS로 A에서 가장 먼 B 찾기
  - 지름 = A–B 거리

- 키워드: `DFS x 2`, `누적 거리`, `가장 먼 노드`, `전역 최댓값`

---

### 2️⃣ `우수 마을` – BOJ 1949

> 각 노드에 선택/미선택 조건을 적용하며 트리 DP 수행

- 핵심 감각:

  - DFS 중 점화식 `dp[node][0 or 1]` 업데이트
  - `선택하면 자식 선택 불가`, `선택 안 하면 자식 중 큰 값 선택`

- 키워드: `선택 조건 분기`, `DP 테이블`, `후위 순회`

---

### 3️⃣ `트리의 독립집합` – BOJ 2213

> 조건 분기 + 선택한 노드 구성 요소까지 추적

- 핵심 감각:

  - `dp[node][0 or 1]`과 함께 구성 노드 추적 리스트 `selected[node][0 or 1]` 사용
  - 자식 노드 결과를 누적하며 최댓값 및 구성 노드 병합

- 키워드: `구성 추적`, `DP + 트리 구조`, `선택/미선택 분기`

---

## 🧠 기억 키워드

- **DFS는 "문제의 흐름을 따라 뿌리를 탐색하는 도구"다**
- 트리는 "순환이 없기 때문에" DFS 경로가 항상 유일하다
- **DFS는 누적/비교/추적이 가능하도록 설계해야 한다**
- `DFS 2회`는 지름 문제에 자주 등장 (루트 자유 선택 가능성)
- 트리 DP는 DFS 구조 위에 점화식을 올리는 것

---

## 📌 뇌 친화 요약 포인트

```text
🧠 DFS = 흐름을 따라가며 "누적"하는 탐색자
🧠 트리 DFS = 조건 분기 없이도 거리, 깊이, 노드 추적이 가능
🧠 전이, 선택, 누적 세 가지를 목적별로 구분해서 사용하라
```

---

## ✅ 사용법 제안

이 감각 노트는 GitHub의 `/감각노트/TreeDFS.md` 같은 디렉터리에 저장해두면 좋아.
나중에 `ZKP 트리 증명`, `Merkle Tree`의 **서브루트 계산**,
혹은 **ZK-Rollup 상태 증명**에서도 이 구조적 감각이 매우 유용하게 작용할 거야.

---
