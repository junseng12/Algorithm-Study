# ### ğŸš€ ì…€í”„ í…ŒìŠ¤íŠ¸ìš© ë¬¸ì œ (Algorithm í•™ìŠµìš©)

# #### ğŸ“Œ ë¬¸ì œëª…: "ê³µí•­ ì´ìš© ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸í•˜ê¸°"

# #### ğŸ“ ë¬¸ì œ ì„¤ëª…

# * Nê°œì˜ ê³µí•­(ë„ì‹œ)ì´ ìˆê³ , ì¼ë¶€ ê³µí•­ë¼ë¦¬ëŠ” **ì§í•­ ë…¸ì„ **ì´ ì¡´ì¬í•œë‹¤.
# * Mê°œì˜ ì§í•­ ë…¸ì„  ì •ë³´ê°€ ì£¼ì–´ì§„ë‹¤ (ì–‘ë°©í–¥ìœ¼ë¡œ ë¹„í–‰ ê°€ëŠ¥).
# * ì´í›„ ì—¬í–‰ ê³„íšìœ¼ë¡œ Kê°œì˜ ê³µí•­ì„ ìˆœì„œ ì—†ì´ ì œì‹œí•œë‹¤.
# * ë‹¹ì‹ ì€ **"í•´ë‹¹ ì—¬í–‰ ê³„íšì—ì„œ ëª¨ë“  ê³µí•­ì´ ì„œë¡œ ë¹„í–‰ ê°€ëŠ¥í•˜ê²Œ ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€"** í™•ì¸í•´ì•¼ í•œë‹¤.

# #### ğŸš© ì…ë ¥

# * ì²« ì¤„ì— N (ê³µí•­ ìˆ˜), M (ì§í•­ ë…¸ì„  ìˆ˜) ì£¼ì–´ì§.
# * ì´í›„ Mì¤„ì— ë‘ ê°œì˜ ê³µí•­ ë²ˆí˜¸ A, B (ì§í•­ ë…¸ì„  A-B ì¡´ì¬).
# * ë‹¤ìŒ ì¤„ì— K (ì—¬í–‰ ê³„íšì— í¬í•¨ëœ ê³µí•­ ìˆ˜).
# * ë‹¤ìŒ ì¤„ì— Kê°œì˜ ê³µí•­ ë²ˆí˜¸ê°€ ê³µë°±ìœ¼ë¡œ êµ¬ë¶„ë˜ì–´ ì£¼ì–´ì§.

# #### ğŸš© ì¶œë ¥

# * **YES** â†’ ì—¬í–‰ ê³„íšì— í¬í•¨ëœ ëª¨ë“  ê³µí•­ì´ ê°™ì€ ì—°ê²°ëœ ì§‘í•©ì— ì†í•œë‹¤ë©´.
# * **NO** â†’ ê·¸ë ‡ì§€ ì•Šìœ¼ë©´.

# #### ğŸš© ì˜ˆì‹œ ì…ë ¥

# ```
# 5 4
# 1 2
# 2 3
# 4 5
# 1 3
# 3
# 1 2 3
# ```

# #### ğŸš© ì˜ˆì‹œ ì¶œë ¥

# ```
# YES
# ```

import sys

input = sys.stdin.readline

sys.setrecursionlimit(10**6)


N, M = map(int, input().split())

parent = [ i for i in range(N+1)]

def find(x):
    if parent[x] != x:
        parent[x] = find(parent[x])  # ê²½ë¡œ ì••ì¶•
    return parent[x]

def union(x, y):
    x_root = find(x)
    y_root = find(y)
    if x_root != y_root:
        parent[y_root] = x_root  # ë˜ëŠ” rank ê¸°ì¤€ìœ¼ë¡œ ìµœì í™” ê°€ëŠ¥


for _ in range(M):
    u, v = map(int, input().split())
    union(u,v)

K = int(input())

# plan = [0 for _ in range(K)]   --> í•„ìš” ì—†ìŒ. ë°”ë¡œ ì•„ë˜ ì½”ë“œë¡œ ì¶©ë¶„
plan = list(map(int, input().split()))


root = find(plan[0])


for airport in plan[1:]:
    if root != find(airport):
        print("NO")
        break
else :
    print("YES")