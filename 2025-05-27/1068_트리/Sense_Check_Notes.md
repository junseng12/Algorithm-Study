# 🧠 감각노트: DFS 조건 분기 제어

## 📌 목적

- DFS는 단순히 모든 경로를 탐색하는 게 아니라,  
  **문제의 조건에 따라 탐색 흐름을 분기하고 통제하는 도구**이다.
- 조건 분기는 DFS 내에서 **방문 여부 이상으로**,  
  **의미 있는 상태 변화**를 반영할 수 있어야 한다.

---

## 🔍 기본 DFS 구조

```python
def dfs(node):
    for next_node in graph[node]:
        if 조건:
            dfs(next_node)
```

- `조건`이 단순히 `visited[]`가 아닐 수도 있음
- 문제마다 “어떤 노드를 탐색할 수 있고 어떤 노드는 제외해야 하는지” 조건이 달라진다.

---

## 🧩 실전 조건 분기 유형별 감각 비교

| 유형           | 문제            | 조건 분기 예시                                                                 |
| -------------- | --------------- | ------------------------------------------------------------------------------ |
| 🔹 구조적 제외 | `1068_트리`     | 삭제된 노드는 탐색 대상에서 제외 (`if child != deleted`)                       |
| 🔹 깊이 제한   | `13023_ABCDE`   | `if depth == 5: return`                                                        |
| 🔹 구성 조건   | `2213_독립집합` | 자식 노드가 선택되지 않은 경우만 누적 (`selected[node][1].extend(...)`)        |
| 🔹 관계 조건   | `2644_촌수계산` | 두 노드 사이 관계를 찾을 때 경로가 존재하면 종료                               |
| 🔹 리프 판별   | `1068_트리`     | 자식이 없거나 모두 삭제된 경우 리프 조건 만족 (`if all(child == deleted ...)`) |

---

## 💡 감각적 사고 구조

| 질문                                            | 의미                      |
| ----------------------------------------------- | ------------------------- |
| 이 문제에서 “탐색하면 안 되는 노드”는 누구인가? | 구조적 배제 조건          |
| DFS를 언제 중단해야 하는가?                     | 깊이 제한 or 조건 만족 시 |
| 탐색 중 어떤 정보를 기억하고 갱신해야 하는가?   | 구성 추적 or 상태 누적    |
| 재귀 후 되돌아올 때 상태를 복원해야 하는가?     | 백트래킹 여부 판단        |

---

## 🧠 기억 키워드 요약

```text
- DFS = 조건의 흐름 제어자
- DFS 내 조건 분기는 단순 방문 체크를 넘어서 문제의 핵심을 담는다
- 탐색의 “의미”가 조건에 따라 바뀐다: 삭제, 리프, 관계, 거리 등
- 항상 "이 분기가 문제의 어떤 조건을 반영하고 있는가?"를 질문하자
```

---

## 📌 패턴 정리

### 1. 특정 노드 제외 (ex: 삭제된 노드)

```python
if next_node == deleted:
    continue
```

### 2. 깊이 도달 시 종료

```python
if depth == 5:
    print(1)
    exit(0)
```

### 3. 리프 조건 분기

```python
if not tree[node] or all(child == deleted for child in tree[node]):
    count += 1
```

### 4. 상태 추적과 조건 복원

```python
visited[node] = True
dfs(next_node)
visited[node] = False  # 백트래킹
```

---

## 🔄 연습 추천

- ✅ `1068 트리` – 삭제 조건 분기
- ✅ `13023 ABCDE` – 깊이 제한 + 백트래킹
- ✅ `2644 촌수계산` – 탐색 중 조건 만족 여부 판단

---
